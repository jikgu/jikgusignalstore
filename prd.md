# prd.md – 직구 시그널 스토어 (Jikgu Signal Store)

> **문서 버전**: 1.1.0  
> **최종 업데이트**: 2024-12-04  
> **관련 문서**: `spec.md` (기술 스펙), `database.sql` (데이터베이스 스키마)

---

## 0. 문서 요약 (Summary)

이 문서는 해외 쇼핑몰(아마존, 이베이, 일본/미국 쇼핑몰 등)의 상품을 한국 사용자에게  
**원스톱으로 구매·결제·배송·통관·CS까지 제공하는 해외직구 통합 플랫폼**  
**"직구 시그널 스토어 (Jikgu Signal Store)"** 의 요구사항을 정의한다.

- 사용자는 **한글 UI, KRW 기준 가격**만 보고 해외 상품을 구매할 수 있다.
- 플랫폼은 **Supabase(Postgres)** 를 중심으로 데이터를 관리하고,  
  프론트에서는 `supabase-js` 로 직접 읽기/쓰기,  
  서버에서는 **FastAPI + supabase-py(service_role)** 로 결제/주문/외부 API 연동 등 민감 로직을 처리한다.
- 배포는 **Vercel 단일 프로젝트(`jikgusignalstore`)** 에서
  - 루트 = Vite 기반 프론트엔드
  - `/api/index.py` = FastAPI 서버리스 함수
  구조로 운영한다.

---

## 1. 프로젝트 개요 (Overview)

### 1.1 프로젝트 이름

- 서비스명: **직구 시그널 스토어 (Jikgu Signal Store)**
- Vercel 프로젝트명: **`jikgusignalstore`**
- GitHub 저장소: **`jikgu/jikgusignalstore`**
- 한 줄 소개:
  - "여러 해외 쇼핑몰을 한 번에 검색하고, 원화로 간편 결제하는 해외직구 플랫폼"

### 1.2 배경/문제 인식

- 해외직구 미경험자는 다음과 같은 어려움을 겪는다:
  - 언어 장벽(영어/일본어/중국어)
  - 배송비/관부가세/환율 계산의 복잡함
  - 통관 절차, 환불/반품 프로세스에 대한 불안
- 기존 직구 서비스의 문제:
  - UI/UX가 구식이거나 모바일에 최적화되지 않음
  - 특정 국가/몰에만 한정
  - 실시간 가격/배송비/재고 반영이 부족

### 1.3 목표

- **해외몰 상품 검색 → 결제 → 배송 추적 → 통관/CS** 까지를 하나의 서비스에서 처리.
- 사용자 입장에서 **"국내 쇼핑몰처럼"** 해외 상품을 구매할 수 있도록 경험 단순화.

---

## 2. 목표 및 성공 지표 (Goals & KPIs)

### 2.1 비즈니스 목표

- 런칭 후 6개월 이내:
  - MAU 10,000명
  - 월 주문 수 3,000건
- 런칭 후 1년 이내:
  - 재구매율 30% 이상
  - 평균 주문 금액 80,000원 이상

### 2.2 제품 목표

- 해외직구 처음인 사용자도 **10분 안에 첫 주문 완료** 가능.
- 장바구니 단계에서 **"최종 결제 금액(상품 + 해외배송 + 국내배송 + 관부가세 + 수수료)"** 를 명확히 보여주기.
- **모바일 퍼스트 UX**로 설계.

### 2.3 KPI

- 첫 방문 → 회원가입 전환율
- 회원가입 → 첫 결제 전환율
- 장바구니 이탈률
- 주문/결제 실패율
- 배송 완료까지 평균 리드 타임
- 재구매율, 문의/CS 발생률

---

## 3. 타깃 유저 & 페르소나

### 3.1 타깃 유저

- 20~40대, 온라인 쇼핑에 익숙한 직장인/자영업자/학생
- 해외 한정 제품(전자기기, 굿즈, 패션, 키덜트 등)에 관심이 있는 얼리어답터
- 이미 해외직구 경험은 있지만, 여러 몰과 배대지를 번거롭게 관리하기 싫은 사용자

### 3.2 대표 페르소나

1. **지은 (32세, 직장인, 여성)**  
   - 인플루언서가 소개한 해외 뷰티/패션 브랜드를 사고 싶으나,  
     언어/관부가세/배송이 복잡해 보여서 망설임.
   - "최종 금액만 딱 보여주고, 국내 카드로 결제하고 싶다."

2. **준호 (29세, 개발자, 남성)**  
   - 아마존/이베이에서 이미 몇 번 직구를 해본 경험자.
   - 각 몰 계정/배송/트래킹을 따로 관리하는 게 귀찮다.
   - "한 곳에서 주문/배송/CS를 모두 관리하고 싶다."

---

## 4. 핵심 가치 제안 (Value Proposition)

- **멀티 해외몰 통합 검색**  
  - 여러 해외몰의 상품을 검색/비교/선택 가능.
- **KRW 기준 최종 결제 금액**  
  - 환율, 국제 배송비, 국내 배송비, 관부가세, 수수료를 모두 합산한  
    **실제 결제 금액을 장바구니에서 한 번에 보여줌**.
- **원스톱 통관/배송/CS**  
  - 사용자는 국내 쇼핑처럼 주문만 하면,  
    실제 해외 주문 및 배송/통관/국내배송/CS는 플랫폼이 대행.
- **분리된 권한/안전한 아키텍처**  
  - 프론트는 Supabase anon key + RLS로 유저 데이터 관리.
  - 민감한 로직(결제, 주문 생성, 외부 API)은 FastAPI + service_role 키로 처리.

---

## 5. 핵심 기능 (Core Features)

### 5.1 상품 검색 및 카탈로그 (Must)
- **동적 카테고리 관리**: 데이터베이스 기반 카테고리 시스템
  - 전자기기, 패션, 뷰티, 스포츠, 홈/리빙 등
  - 관리자가 카테고리 추가/수정/정렬 가능
- **상품 필터링**: 가격대, 브랜드, 쇼핑몰별 필터
- **정렬 옵션**: 추천순, 최신순, 가격순
- **실시간 재고 상태**: IN_STOCK, LIMITED, OUT_OF_STOCK

### 5.2 장바구니 & 주문 요약 (Must)
- **실시간 가격 계산**: 상품가, 배송비, 관부가세, 수수료 자동 계산
- **수량 조정**: 상품별 수량 증감 및 삭제
- **예상 비용 표시**: 최종 결제 금액 실시간 업데이트
- **로그인 사용자 전용**: RLS 정책으로 보안 강화

### 5.3 결제 & 주문 생성 (Must, FastAPI 담당)
- **다양한 결제 수단**: 신용카드, 카카오페이, 네이버페이
- **주문 번호 자동 생성**: ORD + 날짜 + 일련번호 형식
- **트랜잭션 보장**: 주문 생성 시 장바구니 자동 비우기
- **PG사 연동**: 실제 결제 처리 (향후 구현)

### 5.4 배송 & 통관 트래킹 (Must)
- **배송 단계 추적**: 
  - 주문 접수 → 해외 배송 시작 → 한국 도착 → 통관 → 국내 배송 → 배송 완료
- **운송장 번호 관리**: 해외/국내 운송장 분리 관리
- **예상 소요 시간**: 각 단계별 예상 기간 표시

### 5.5 사용자 계정 & 주문 내역 (Must, supabase-js + RLS)
- **Supabase Auth 통합**: 이메일/비밀번호 인증
- **프로필 관리**: 이름, 전화번호, 개인통관고유부호
- **배송지 관리**: 복수 배송지 등록, 기본 배송지 설정
- **주문 내역 조회**: 본인 주문만 조회 가능 (RLS)

### 5.6 카테고리 관리 시스템 (Must)
- **동적 카테고리**: 데이터베이스 기반 카테고리 관리
- **정렬 순서**: display_order로 메뉴 순서 제어
- **아이콘 색상**: 카테고리별 구분 색상
- **활성화 제어**: is_active로 노출 제어

### 5.7 리뷰 & 평점 (Should)
- 구매 완료 후 리뷰 작성
- 별점 및 텍스트 리뷰
- 리뷰 이미지 업로드

### 5.8 프로모션 & 쿠폰 (Could)
- 할인 쿠폰 발급/적용
- 첫 구매 할인
- 대량 구매 할인

### 5.9 관리자 기능 (Must, FastAPI + service_role)
- **상품 관리**: 상품 등록/수정/삭제
- **주문 관리**: 주문 상태 변경, 운송장 입력
- **카테고리 관리**: 카테고리 추가/수정/순서 변경
- **통계 조회**: 주문 수, 회원 수, 매출 통계

---

## 6. 사용자 여정 (User Journey)

### 6.1 신규 사용자 여정

1. **랜딩**
   - 메인 페이지 접속
   - 인기 카테고리 및 추천 상품 확인

2. **탐색**
   - 카테고리 브라우징 또는 검색
   - 상품 상세 페이지에서 가격 정보 확인
   - 예상 관부가세 및 총 비용 확인

3. **회원가입**
   - 이메일/비밀번호로 간단 가입
   - 이메일 인증

4. **구매**
   - 장바구니 담기
   - 배송지 정보 입력
   - 개인통관고유부호 입력
   - 결제 수단 선택 및 결제

5. **추적**
   - 주문 내역에서 배송 상태 확인
   - 단계별 배송 추적

### 6.2 재구매 사용자 여정

1. **로그인** → 2. **상품 검색** → 3. **장바구니** → 4. **저장된 배송지 선택** → 5. **결제**

---

## 7. 정보 구조 (IA)

```
/
├── 홈 (추천 상품, 카테고리)
├── 카테고리
│   ├── 전자기기
│   ├── 패션
│   ├── 뷰티
│   ├── 스포츠
│   └── 홈/리빙
├── 검색
├── 상품 상세
├── 장바구니
├── 결제
├── 주문
│   ├── 주문 목록
│   └── 주문 상세 (배송 추적)
├── 마이페이지
│   ├── 프로필 관리
│   ├── 배송지 관리
│   └── 개인통관고유부호
└── 고객센터
    ├── FAQ
    ├── 1:1 문의
    └── 이용가이드
```

---

## 8. 기술 스택 & 아키텍처 요약

### 8.1 프론트엔드
- **Framework**: Vite + React + TypeScript
- **Styling**: TailwindCSS
- **State**: React Query + Zustand
- **Auth**: Supabase Auth
- **API**: supabase-js (anon key)

### 8.2 백엔드
- **Framework**: FastAPI (Python)
- **Deployment**: Vercel Serverless Functions
- **Database**: Supabase (service_role key)
- **External APIs**: PG, 환율, 배송사 API

### 8.3 데이터베이스
- **Platform**: Supabase (PostgreSQL)
- **Tables**: users, products, categories, carts, cart_items, orders, order_items, shipments, user_addresses
- **Security**: Row Level Security (RLS)
- **Triggers**: updated_at 자동 업데이트, 사용자 생성 시 프로필/장바구니 자동 생성

### 8.4 배포
- **Platform**: Vercel
- **Domain**: jikgusignalstore.vercel.app
- **CI/CD**: GitHub 연동 자동 배포

---

## 9. 비기능 요구사항

### 9.1 성능
- 페이지 로드: 3초 이내
- API 응답: 1초 이내
- 동시 접속: 1,000명 이상

### 9.2 보안
- HTTPS 전용
- RLS로 데이터 접근 제어
- Service Role Key는 서버에서만 사용
- 민감 정보 암호화

### 9.3 가용성
- 99.9% uptime (Vercel + Supabase SLA 기준)
- 자동 스케일링

### 9.4 사용성
- 모바일 반응형 디자인
- 직관적인 UI/UX
- 한국어 인터페이스

---

## 10. 제약사항 & 리스크

### 10.1 기술적 제약
- Supabase 무료 티어 제한 (500MB DB, 1GB 대역폭)
- Vercel 무료 티어 제한 (서버리스 함수 실행 시간)

### 10.2 법적 제약
- 개인정보보호법 준수
- 전자상거래법 준수
- 관세법 준수

### 10.3 리스크
- 환율 변동 리스크
- 해외 몰 API 변경/중단
- 통관 지연/거부

---

## 11. 릴리즈 범위

### 11.1 MVP (현재 구현 완료)
- ✅ 사용자 인증 (회원가입/로그인)
- ✅ 상품 카탈로그 (카테고리별 조회)
- ✅ 상품 상세 페이지
- ✅ 장바구니 기능
- ✅ 동적 카테고리 시스템
- ✅ 데이터베이스 스키마 및 샘플 데이터
- ⏳ 결제 프로세스 (UI만, 실제 PG 연동 제외)
- ⏳ 주문 내역 조회

### 11.2 Phase 2
- 실제 PG 연동
- 실시간 환율 API 연동
- 배송사 트래킹 API 연동
- 관리자 대시보드

### 11.3 Phase 3
- 리뷰 시스템
- 추천 알고리즘
- 쿠폰/프로모션
- 고객센터 챗봇

---

## 12. 오픈 이슈

1. **PG사 선정**: 아임포트, 토스페이먼츠, KG이니시스 중 선택
2. **배송대행사 파트너십**: 실제 해외 구매/배송 대행 업체 선정
3. **환율 API**: 실시간 환율 정보 제공 서비스 선정
4. **고객센터 운영**: 초기 CS 인력 및 프로세스 구축
5. **마케팅 전략**: 초기 사용자 확보 방안

---

## 부록: 현재 구현 상태

### 구현 완료 기능
- 프론트엔드 전체 라우팅 구조
- Supabase 인증 통합
- 상품 목록/상세/장바구니 CRUD
- 동적 카테고리 메뉴
- RLS 기반 데이터 보안
- 반응형 UI

### 샘플 데이터
- 5개 카테고리 (전자기기, 패션, 뷰티, 스포츠, 홈/리빙)
- 15개 상품 (카테고리별 3개)
- 실제 브랜드 제품 정보 포함